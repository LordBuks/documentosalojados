<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Cadastro de Autorizações - SC Internacional</title>
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <header class="header">
    <img src="https://i.imgur.com/odzcc03.png" alt="Logo SC Internacional" class="header-logo">
    <h1 class="header-title">Controle de Autorizações de Atletas Alojados</h1>
  </header>

  <div class="container">
    <!-- Seção Teórica -->
    <div class="card teoria-card">
      <h2 class="card-title">Documentos Necessários para Atletas Alojados</h2>
      <p>Este documento tem como objetivo registrar e controlar as autorizações necessárias para atletas menores de idade residentes no alojamento, garantindo a conformidade com a legislação vigente e a proteção integral dos direitos da criança e do adolescente.</p>

      <h3>1. Autorização para Hospedagem no Alojamento da Categoria de Base</h3>
      <p>Esta autorização é fundamental para permitir que os atletas menores de idade residam nas dependências do alojamento do clube. A hospedagem de crianças e adolescentes desacompanhados dos pais ou responsáveis legais é regulamentada por leis específicas para garantir sua segurança e bem-estar.</p>
      <h4><strong>Base Legal:</strong></h4>
      <ul>
        <li><strong>Estatuto da Criança e do Adolescente (ECA) - Lei nº 8.069/1990:</strong>
          <ul>
            <li><strong>Art. 82:</strong> Proíbe a hospedagem de criança ou adolescente em hotel, motel, pensão ou estabelecimento congênere, salvo se autorizado ou acompanhado pelos pais ou responsável, ou por autoridade judicial.</li>
            <li><strong>Art. 250:</strong> Prevê sanções para estabelecimentos que hospedarem criança ou adolescente desacompanhado dos pais ou responsável, ou sem autorização escrita destes ou da autoridade judiciária.</li>
          </ul>
        </li>
        <li><strong>Lei Pelé (Lei nº 9.615/1998) e Lei Geral do Esporte (Lei nº 14.597/2023):</strong>
          <ul>
            <li>A Lei Geral do Esporte, em seu <strong>Art. 99, § 14</strong>, estabelece que somente organizações esportivas formadoras certificadas podem manter alojamento para atletas em formação, o que implica a necessidade de autorização dos responsáveis e o cumprimento de requisitos de habitabilidade, higiene, salubridade e segurança.</li>
          </ul>
        </li>
        <li><strong>Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018:</strong>
          <ul>
            <li>A coleta e o tratamento de dados pessoais dos atletas menores e de seus responsáveis para fins de hospedagem devem estar em conformidade com a LGPD, exigindo consentimento específico e em destaque, dado por pelo menos um dos pais ou responsável legal, e garantindo o melhor interesse do menor (Art. 14).</li>
          </ul>
        </li>
      </ul>

      <h3>2. Autorização de Matrícula Escolar para o atleta alojado no período letivo do ano escolar vigente</h3>
      <p>Esta autorização é crucial para garantir o direito à educação dos atletas menores de idade que residem no alojamento do clube. A matrícula e a frequência escolar são direitos fundamentais assegurados por lei, e o clube, como entidade responsável pela formação do atleta, deve zelar pelo cumprimento desses direitos.</p>
      <h4><strong>Base Legal:</strong></h4>
      <ul>
        <li><strong>Estatuto da Criança e do Adolescente (ECA) - Lei nº 8.069/1990:</strong>
          <ul>
            <li><strong>Art. 4º:</strong> É dever da família, da comunidade, da sociedade em geral e do poder público assegurar, com absoluta prioridade, a efetivação dos direitos referentes à vida, à saúde, à alimentação, à educação, ao esporte, ao lazer, à profissionalização, à cultura, à dignidade, ao respeito, à liberdade e à convivência familiar e comunitária.</li>
            <li><strong>Art. 53:</strong> A criança e o adolescente têm direito à educação, visando ao pleno desenvolvimento de sua pessoa, preparo para o exercício da cidadania e qualificação para o trabalho.</li>
            <li><strong>Art. 54:</strong> É dever do Estado assegurar à criança e ao adolescente: I - ensino fundamental, obrigatório e gratuito, inclusive para os que a ele não tiveram acesso na idade própria; II - progressiva extensão da obrigatoriedidade e gratuidade do ensino médio; III - atendimento educacional especializado aos portadores de deficiência, preferencialmente na rede regular de ensino; IV - atendimento em creche e pré-escola às crianças de zero a seis anos de idade; V - acesso aos níveis mais elevados do ensino, da pesquisa e da criação artística, segundo a capacidade de cada um; VI - oferta de ensino noturno regular, adequado às condições do adolescente trabalhador; VII - atendimento no ensino fundamental, através de programas suplementares de material didático-escolar, transporte, alimentação e assistência à saúde.</li>
          </ul>
        </li>
        <li><strong>Lei Pelé (Lei nº 9.615/1998) e Lei Geral do Esporte (Lei nº 14.597/2023):</strong>
          <ul>
            <li>A legislação esportiva reforça a importância da educação para os atletas em formação. A Lei Geral do Esporte, em seu <strong>Art. 99, § 1º, inciso I</strong>, estabelece que as organizações esportivas formadoras devem garantir a frequência escolar e o aproveitamento pedagógico dos atletas em formação, sendo a matrícula um requisito essencial para a certificação do clube como formador.</li>
          </ul>
        </li>
        <li><strong>Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018:</strong>
          <ul>
            <li>A matrícula do atleta envolve o tratamento de dados pessoais sensíveis (como dados de saúde, se houver). O consentimento dos pais ou responsáveis é fundamental para a coleta e o compartilhamento desses dados com as instituições de ensino, sempre visando o melhor interesse do menor e a finalidade específica da matrícula (Art. 14).</li>
          </ul>
        </li>
      </ul>

      <h3>3. Autorização para Saídas das Dependências do Alojamento</h3>
      <p>Esta autorização permite que atletas menores de idade se ausentem das dependências do alojamento do clube nos finais de semana e feriados para se deslocarem para suas residências e/ou para a casa de familiares e amigos, desde que liberados pela Comissão Técnica e pelo Serviço Social do clube. Essa autorização visa equilibrar a disciplina e a formação esportiva com o direito à convivência familiar e comunitária.</p>
      <h4><strong>Base Legal:</strong></h4>
      <ul>
        <li><strong>Estatuto da Criança e do Adolescente (ECA) - Lei nº 8.069/1990:</strong>
          <ul>
            <li><strong>Art. 16, inciso V:</strong> O direito à liberdade compreende os seguintes aspectos: ir, vir e estar nos logradouros públicos e espaços comunitários, ressalvadas as restrições legais.</li>
            <li><strong>Art. 19:</strong> Toda criança ou adolescente tem direito a ser criado e educado no seio de sua família e, excepcionalmente, em família substituta, assegurada a convivência familiar e comunitária.</li>
            <li><strong>Art. 83:</strong> Nenhuma criança ou adolescente poderá viajar para fora da comarca onde reside, desacompanhado dos pais ou dos responsáveis, sem expressa autorização judicial.</li>
            <li><strong>Art. 84:</strong> Quando se tratar de viagem dentro do território nacional, a autorização não será exigida se a criança ou adolescente estiver acompanhado de ascendente ou colateral maior, até o terceiro grau, comprovado o parentesco, ou de pessoa maior, expressamente autorizada pelo pai, mãe ou responsável, por meio de documento com firma reconhecida.</li>
          </ul>
        </li>
        <li><strong>Lei Pelé (Lei nº 9.615/1998) e Lei Geral do Esporte (Lei nº 14.597/2023):</strong>
          <ul>
            <li>Embora não haja um artigo específico sobre saídas de alojamentos, a Lei Pelé e a Lei Geral do Esporte, ao regulamentarem a formação de atletas, pressupõem a necessidade de um ambiente que garanta o desenvolvimento integral do menor, incluindo o convívio familiar. A liberação pela Comissão Técnica e Serviço Social do clube demonstra o zelo da instituição pela segurança e bem-estar do atleta, em consonância com as diretrizes de proteção do menor.</li>
          </ul>
        </li>
        <li><strong>Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018:</strong>
          <ul>
            <li>A autorização para saídas pode envolver o tratamento de dados pessoais, como informações de contato de familiares e amigos, e registros de horários de entrada e saída. O consentimento dos pais ou responsáveis é fundamental para a coleta e o tratamento desses dados, que devem ser utilizados estritamente para a finalidade de controle e segurança do atleta, em conformidade com os princípios da LGPD (Art. 7º e Art. 14).</li>
          </ul>
        </li>
      </ul>

      <h3>4. Termo de Consentimento para Obtenção e Uso de Imagens</h3>
      <p>Este termo é essencial para autorizar a captação, o armazenamento e a utilização da imagem (fotos e vídeos) do atleta menor de idade para fins de divulgação institucional, promocional ou jornalística do clube. A proteção da imagem de crianças e adolescentes é um direito fundamental, e seu uso deve ser feito com o consentimento expresso dos responsáveis legais.</p>
      <h4><strong>Base Legal:</strong></h4>
      <ul>
        <li><strong>Estatuto da Criança e do Adolescente (ECA) - Lei nº 8.069/1990:</strong>
          <ul>
            <li><strong>Art. 17:</strong> O direito ao respeito consiste na inviolabilidade da integridade física, psíquica e moral da criança e do adolescente, abrangendo a preservação da imagem, da identidade, da autonomia, dos valores, ideias e crenças, dos espaços e objetos pessoais.</li>
            <li><strong>Art. 18:</strong> É dever de todos velar pela dignidade da criança e do adolescente, pondo-os a salvo de qualquer tratamento desumano, violento, aterrorizante, vexatório ou constrangedor.</li>
            <li>O uso da imagem de crianças e adolescentes, mesmo que para fins lícitos, requer o consentimento dos pais ou responsáveis legais, sob pena de violação dos direitos da personalidade e possível indenização por dano moral.</li>
          </ul>
        </li>
        <li><strong>Lei Pelé (Lei nº 9.615/1998) e Lei Geral do Esporte (Lei nº 14.597/2023):</strong>
          <ul>
            <li>A Lei Pelé, em seu <strong>Art. 87-A</strong>, e a Lei Geral do Esporte, regulamentam o direito de imagem do atleta profissional. Embora se refiram principalmente a atletas profissionais, o princípio de que o uso da imagem deve ser cedido ou explorado mediante ajuste contratual de natureza civil se estende, por analogia e em observância ao ECA, aos atletas em formação, exigindo o consentimento dos responsáveis.</li>
          </ul>
        </li>
        <li><strong>Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018:</strong>
          <ul>
            <li>A imagem é considerada um dado pessoal, e seu tratamento (coleta, armazenamento, uso, etc.) deve estar em conformidade com a LGPD. Para crianças e adolescentes, o <strong>Art. 14</strong> da LGPD exige que o tratamento de dados pessoais seja realizado com o consentimento específico e em destaque dado por pelo menos um dos pais ou responsável legal, e que o tratamento seja feito no melhor interesse do menor. Isso significa que o termo de consentimento deve ser claro, informar a finalidade do uso da imagem e garantir que o uso seja sempre benéfico ou neutro para o atleta.</li>
          </ul>
        </li>
      </ul>

      <h3>5. Termo de Ciência e Concordância e Responsabilidade dos Responsáveis (Normas Internas do Alojamento)</h3>
      <p>Este termo formaliza a ciência e a concordância dos pais ou responsáveis legais com as normas internas da rotina do alojamento do clube, e também assumir a responsabilidade pelo cumprimento dessas regras por parte do atleta menor. É um documento essencial para estabelecer um ambiente organizado, seguro e propício ao desenvolvimento dos atletas, além de delimitar as responsabilidades de todas as partes envolvidas.</p>
      <h4><strong>Base Legal:</strong></h4>
      <ul>
        <li><strong>Estatuto da Criança e do Adolescente (ECA) - Lei nº 8.069/1990:</strong>
          <ul>
            <li><strong>Art. 4º:</strong> Reitera o dever da família, da comunidade, da sociedade em geral e do poder público em assegurar os direitos da criança e do adolescente, o que inclui a criação de um ambiente seguro e educativo, onde as normas internas contribuem para a ordem e o respeito mútuo.</li>
            <li><strong>Art. 5º:</strong> Nenhuma criança ou adolescente será objeto de qualquer forma de negligência, discriminação, exploração, violência, crueldade e opressão, punido na forma da lei qualquer atentado, por ação ou omissão, aos seus direitos fundamentais. A ciência e concordância com as normas internas visam prevenir situações que possam configurar negligência ou risco.</li>
            <li><strong>Art. 15:</strong> A criança e o adolescente têm direito à liberdade, ao respeito e à dignidade como pessoas humanas em processo de desenvolvimento e como sujeitos de direitos civis, humanos e sociais garantidos na Constituição e nas leis. As normas internas devem ser elaboradas e aplicadas de forma a respeitar esses direitos.</li>
          </ul>
        </li>
        <li><strong>Lei Pelé (Lei nº 9.615/1998) e Lei Geral do Esporte (Lei nº 14.597/2023):</strong>
          <ul>
            <li>A Lei Geral do Esporte, em seu <strong>Art. 99, § 14</strong>, ao exigir que as organizações esportivas formadoras certificadas mantenham alojamentos em condições adequadas de habitabilidade, higiene, salubridade e segurança, implicitamente requer que existam normas internas para a manutenção dessas condições. A ciência e concordância dos responsáveis com essas normas são parte integrante do processo de garantia da proteção do atleta.</li>
          </ul>
        </li>
        <li><strong>Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018:</strong>
          <ul>
            <li>O termo de ciência e concordância pode conter dados pessoais dos responsáveis e do atleta, como assinaturas, dados de contato e informações sobre o cumprimento das normas. O tratamento desses dados deve seguir os princípios da LGPD, com consentimento explícito e informado dos responsáveis, e a garantia de que os dados serão utilizados apenas para a finalidade de gestão do alojamento e proteção do menor (Art. 7º e Art. 14).</li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- Seção de Cadastro de Quarto -->
    <div class="card no-print">
      <h2 class="card-title">Controle por Quarto</h2>
      <div class="form-row">
        <label for="numeroQuarto">Número do Quarto:</label>
        <input type="number" id="numeroQuarto" min="1" placeholder="Ex: 11">
      </div>
      <div class="buttons-container">
        <button id="btnCriarQuarto" class="btn btn-primary">
          <i class="fas fa-plus"></i> Criar/Carregar Quarto
        </button>
        <button id="btnSalvarTodos" class="btn btn-success">
          <i class="fas fa-save"></i> Salvar Todos os Atletas
        </button>
        <button id="btnLimparTudo" class="btn btn-danger">
          <i class="fas fa-trash"></i> Limpar Tudo
        </button>
        <button id="btnImprimirTodos" class="btn btn-info">
          <i class="fas fa-print"></i> Imprimir Todos os PDFs
        </button>
      </div>
    </div>

    <!-- Container dos Atletas -->
    <div id="atletasContainer" class="atletas-container">
      <!-- Os atletas serão inseridos aqui dinamicamente -->
    </div>

    <!-- Área de impressão (oculta na tela) -->
    <div id="printArea" class="print-area" style="display: none;">
      <!-- Conteúdo para impressão será inserido aqui -->
    </div>

    <!-- Card do rodapé com informações do serviço social -->
    <div class="card footer-info-card">
      <div style="text-align: center;">
        <footer>
          <img src="https://i.imgur.com/HIsH9X5.png" alt="Logo SC Internacional" class="footer-logo">
          <p><strong>Gerenciamento de Autorizações das Categorias de Base</strong></p>
          <p>Departamento de Serviço Social</p>
        </footer>
      </div>
    </div>
  </div>

  <p style="text-align: center; margin-top: 20px; font-size: 0.8em; color: #6c757d;">© 2025 VampTech Ltda. Todos os direitos reservados.</p>

  <script>
    // Categorias disponíveis
    const categorias = ['Sub-14', 'Sub-15', 'Sub-16', 'Sub-17', 'Sub-20'];
    
    // Autorizações disponíveis com ícones e cores
    const autorizacoes = [
      {
        sigla: 'Hospedagem',
        titulo: 'Hospedagem',
        descricao: 'Autorização para hospedagem no alojamento',
        icone: 'fas fa-home',
        classe: 'hospedagem'
      },
      {
        sigla: 'Matricula',
        titulo: 'Matrícula',
        descricao: 'Autorização para matrícula escolar',
        icone: 'fas fa-graduation-cap',
        classe: 'matricula'
      },
      {
        sigla: 'Saidas',
        titulo: 'Saídas',
        descricao: 'Autorização para saídas do alojamento',
        icone: 'fas fa-door-open',
        classe: 'saidas'
      },
      {
        sigla: 'Imagem',
        titulo: 'Imagem',
        descricao: 'Termo de consentimento para uso de imagens',
        icone: 'fas fa-camera',
        classe: 'imagem'
      },
      {
        sigla: 'Regras',
        titulo: 'Regras',
        descricao: 'Termo de ciência das normas internas',
        icone: 'fas fa-clipboard-list',
        classe: 'regras'
      }
    ];

    let quartoAtual = null;
    let atletas = {};

    // Função para criar/carregar um quarto
    function criarQuarto() {
      const numeroQuarto = document.getElementById('numeroQuarto').value;
      
      if (!numeroQuarto) {
        alert('Por favor, insira o número do quarto.');
        return;
      }

      quartoAtual = numeroQuarto;
      
      // Carregar dados existentes ou criar novo quarto
      const dadosSalvos = localStorage.getItem('autorizacoes_sistema_melhorado');
      if (dadosSalvos) {
        try {
          atletas = JSON.parse(dadosSalvos);
        } catch (e) {
          console.error('Erro ao carregar dados salvos:', e);
          atletas = {};
        }
      }

      if (!atletas[quartoAtual]) {
        atletas[quartoAtual] = [];
        // Criar 3 atletas vazios para o quarto
        for (let i = 1; i <= 3; i++) {
          atletas[quartoAtual].push({
            id: `${quartoAtual}_${i}`,
            nome: '',
            categoria: '',
            quarto: quartoAtual,
            posicao: i,
            autorizacoes: {}
          });
        }
      }

      renderizarAtletas();
    }

    // Função para renderizar os atletas na tela
    function renderizarAtletas() {
      const container = document.getElementById('atletasContainer');
      container.innerHTML = '';

      if (!quartoAtual || !atletas[quartoAtual]) {
        return;
      }

      atletas[quartoAtual].forEach((atleta, index) => {
        const atletaCard = criarCardAtleta(atleta, index);
        container.appendChild(atletaCard);
      });
    }

    // Função para criar o card de um atleta
    function criarCardAtleta(atleta, index) {
      const card = document.createElement('div');
      card.className = 'atleta-card';
      
      card.innerHTML = `
        <div class="atleta-header">
          <i class="fas fa-user-circle" style="margin-right: 10px;"></i>
          Atleta ${atleta.posicao} - Quarto ${atleta.quarto}
        </div>
        
        <div class="atleta-content">
          <div class="form-row">
            <label>Nome do Atleta:</label>
            <input type="text" id="nome_${atleta.id}" value="${atleta.nome}" 
                   onchange="atualizarAtleta('${atleta.id}', 'nome', this.value)" 
                   placeholder="Digite o nome do atleta">
          </div>
          
          <div class="form-row">
            <label>Categoria:</label>
            <select id="categoria_${atleta.id}" 
                    onchange="atualizarAtleta('${atleta.id}', 'categoria', this.value)">
              <option value="">Selecione a categoria</option>
              ${categorias.map(cat => 
                `<option value="${cat}" ${atleta.categoria === cat ? 'selected' : ''}>${cat}</option>`
              ).join('')}
            </select>
          </div>
          
          <div style="margin-top: 25px;">
            <h4 style="color: #dc3545; margin-bottom: 20px; text-align: center; font-size: 1.1rem;">
              <i class="fas fa-clipboard-check" style="margin-right: 8px;"></i>
              Autorizações Pendentes
            </h4>
            <div class="autorizacoes-grid">
              ${autorizacoes.map(auth => `
                <div class="autorizacao-card ${auth.classe} ${atleta.autorizacoes[auth.sigla] ? 'checked' : ''}" 
                     onclick="toggleAutorizacao('${atleta.id}', '${auth.sigla}')">
                  <div class="autorizacao-icon">
                    <i class="${auth.icone}"></i>
                  </div>
                  <div class="autorizacao-title">${auth.titulo}</div>
                  <div class="autorizacao-description">${auth.descricao}</div>
                  <div class="checkbox-container">
                    <div class="custom-checkbox">
                      <input type="checkbox" id="${auth.sigla}_${atleta.id}" 
                             ${atleta.autorizacoes[auth.sigla] ? 'checked' : ''}
                             onchange="atualizarAutorizacao('${atleta.id}', '${auth.sigla}', this.checked)">
                    </div>
                    <label class="checkbox-label" for="${auth.sigla}_${atleta.id}">
                      ${atleta.autorizacoes[auth.sigla] ? 'Pendente' : 'Autorizado'}
                    </label>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
          
          <div class="individual-print-btn">
            <button onclick="imprimirAtleta('${atleta.id}')" class="btn btn-warning">
              <i class="fas fa-file-pdf"></i> Imprimir PDF Individual
            </button>
          </div>
        </div>
      `;
      
      return card;
    }

    // Função para alternar autorização ao clicar no card
    function toggleAutorizacao(atletaId, autorizacao) {
      if (!quartoAtual || !atletas[quartoAtual]) return;
      
      const atleta = atletas[quartoAtual].find(a => a.id === atletaId);
      if (atleta) {
        const novoEstado = !atleta.autorizacoes[autorizacao];
        if (novoEstado) {
          atleta.autorizacoes[autorizacao] = true;
        } else {
          delete atleta.autorizacoes[autorizacao];
        }
        
        // Atualizar checkbox
        const checkbox = document.getElementById(`${autorizacao}_${atletaId}`);
        if (checkbox) {
          checkbox.checked = novoEstado;
        }
        
        // Atualizar visual do card
        const card = checkbox.closest('.autorizacao-card');
        if (card) {
          if (novoEstado) {
            card.classList.add('checked');
          } else {
            card.classList.remove('checked');
          }
          
          // Atualizar label
          const label = card.querySelector('.checkbox-label');
          if (label) {
            label.textContent = novoEstado ? 'Pendente' : 'Autorizado';
          }
        }
        
        salvarDados();
      }
    }

    // Função para atualizar dados do atleta
    function atualizarAtleta(atletaId, campo, valor) {
      if (!quartoAtual || !atletas[quartoAtual]) return;
      
      const atleta = atletas[quartoAtual].find(a => a.id === atletaId);
      if (atleta) {
        atleta[campo] = valor;
        salvarDados();
      }
    }

    // Função para atualizar autorização via checkbox
    function atualizarAutorizacao(atletaId, autorizacao, marcado) {
      if (!quartoAtual || !atletas[quartoAtual]) return;
      
      const atleta = atletas[quartoAtual].find(a => a.id === atletaId);
      if (atleta) {
        if (marcado) {
          atleta.autorizacoes[autorizacao] = true;
        } else {
          delete atleta.autorizacoes[autorizacao];
        }
        
        // Atualizar visual do card
        const checkbox = document.getElementById(`${autorizacao}_${atletaId}`);
        const card = checkbox.closest('.autorizacao-card');
        if (card) {
          if (marcado) {
            card.classList.add('checked');
          } else {
            card.classList.remove('checked');
          }
          
          // Atualizar label
          const label = card.querySelector('.checkbox-label');
          if (label) {
            label.textContent = marcado ? 'Pendente' : 'Autorizado';
          }
        }
        
        salvarDados();
      }
    }

    // Função para salvar dados no localStorage
    function salvarDados() {
      try {
        localStorage.setItem('autorizacoes_sistema_melhorado', JSON.stringify(atletas));
      } catch (e) {
        console.error('Erro ao salvar dados:', e);
        alert('Erro ao salvar dados. Verifique o espaço disponível no navegador.');
      }
    }

    // Função para salvar todos os atletas
    function salvarTodos() {
      if (!quartoAtual || !atletas[quartoAtual]) {
        alert('Nenhum quarto carregado para salvar.');
        return;
      }
      
      salvarDados();
      alert('Dados salvos com sucesso!');
    }

    // Função para limpar tudo
    function limparTudo() {
      if (confirm('Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.')) {
        localStorage.removeItem('autorizacoes_sistema_melhorado');
        atletas = {};
        quartoAtual = null;
        document.getElementById('numeroQuarto').value = '';
        document.getElementById('atletasContainer').innerHTML = '';
        alert('Todos os dados foram limpos!');
      }
    }

    // Função para imprimir atleta individual
    function imprimirAtleta(atletaId) {
      if (!quartoAtual || !atletas[quartoAtual]) return;
      
      const atleta = atletas[quartoAtual].find(a => a.id === atletaId);
      if (!atleta || !atleta.nome) {
        alert('Por favor, preencha o nome do atleta antes de imprimir.');
        return;
      }
      
      gerarPDFAtleta(atleta);
    }

    // Função para imprimir todos os PDFs
    function imprimirTodos() {
      if (!quartoAtual || !atletas[quartoAtual]) {
        alert('Nenhum quarto carregado para imprimir.');
        return;
      }
      
      const atletasComNome = atletas[quartoAtual].filter(a => a.nome.trim() !== '');
      
      if (atletasComNome.length === 0) {
        alert('Nenhum atleta com nome preenchido para imprimir.');
        return;
      }
      
      atletasComNome.forEach((atleta, index) => {
        setTimeout(() => {
          gerarPDFAtleta(atleta);
        }, index * 1000); // Delay de 1 segundo entre cada impressão
      });
    }

    // Função para gerar PDF do atleta
    function gerarPDFAtleta(atleta) {
      const printArea = document.getElementById('printArea');
      
      const autorizacoesMarcadas = Object.keys(atleta.autorizacoes).filter(auth => atleta.autorizacoes[auth]);
      
      printArea.innerHTML = `
        <div style="padding: 40px; font-family: Arial, sans-serif;">
          <div style="text-align: center; margin-bottom: 30px;">
            <img src="https://i.imgur.com/odzcc03.png" alt="Logo SC Internacional" style="height: 80px; margin-bottom: 15px;">
            <h1 style="color: #dc3545; margin: 0;">Sistema de Cadastro de Autorizações</h1>
            <h2 style="color: #666; margin: 5px 0;">Atletas Menores Alojados</h2>
          </div>
          
          <div style="border: 2px solid #dc3545; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
            <h3 style="color: #dc3545; margin-top: 0;">Dados do Atleta</h3>
            <p><strong>Nome:</strong> ${atleta.nome}</p>
            <p><strong>Categoria:</strong> ${atleta.categoria}</p>
            <p><strong>Quarto:</strong> ${atleta.quarto}</p>
            <p><strong>Data de Geração:</strong> ${new Date().toLocaleDateString('pt-BR')}</p>
          </div>
          
          <div style="border: 2px solid #dc3545; border-radius: 8px; padding: 20px;">
            <h3 style="color: #dc3545; margin-top: 0;">Autorizações de Alojamento Pendentes</h3>
            ${autorizacoesMarcadas.length > 0 ? 
              autorizacoesMarcadas.map(sigla => {
                const auth = autorizacoes.find(a => a.sigla === sigla);
                return `
                  <div style="margin-bottom: 15px; padding: 15px; background-color: #f8f9fa; border-left: 4px solid #dc3545; border-radius: 4px;">
                    <strong style="color: #dc3545;">${auth.titulo}:</strong> ${auth.descricao}
                  </div>
                `;
              }).join('') : 
              '<p style="color: #666; font-style: italic;">O atleta possui todas autorizações.</p>'
            }
          </div>
          
          <div style="margin-top: 30px; text-align: center;">
            <img src="https://i.imgur.com/HIsH9X5.png" alt="Logo SC Internacional" style="height: 60px; margin-bottom: 10px;">
            <p style="font-size: 0.9rem; margin: 5px 0;"><strong>Gerenciamento de Autorizações das Categorias de Base</strong></p>
            <p style="font-size: 0.9rem; margin: 5px 0;">Departamento de Serviço Social</p>
          </div>
        </div>
      `;
      
      printArea.style.display = 'block';
      window.print();
      printArea.style.display = 'none';
    }

    // Event listeners para os botões
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('btnCriarQuarto').addEventListener('click', criarQuarto);
      document.getElementById('btnSalvarTodos').addEventListener('click', salvarTodos);
      document.getElementById('btnLimparTudo').addEventListener('click', limparTudo);
      document.getElementById('btnImprimirTodos').addEventListener('click', imprimirTodos);
      
      // Permitir criar quarto ao pressionar Enter no campo de número
      document.getElementById('numeroQuarto').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          criarQuarto();
        }
      });
    });
  </script>
</body>
</html>

